"use strict";(self.webpackChunkblog_template=self.webpackChunkblog_template||[]).push([[3753],{3905:(e,t,a)=>{a.d(t,{Zo:()=>k,kt:()=>m});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},k=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,k=o(e,["components","mdxType","originalType","parentName"]),c=p(a),m=l,d=c["".concat(s,".").concat(m)]||c[m]||u[m]||r;return a?n.createElement(d,i(i({ref:t},k),{},{components:a})):n.createElement(d,i({ref:t},k))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},6238:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(7462),l=(a(7294),a(3905));const r={slug:"eks worknode",title:"eks \uad6c\uc131\ud558\uae30(3) - worknode \uc0dd\uc131 \ubc0f \ud655\uc778",authors:"andes",tags:["kubernetes","aws","eks","vpc","worknode"]},i=void 0,o={permalink:"/blog/eks worknode",source:"@site/blog/2022-11-16-eks-worknode/content.md",title:"eks \uad6c\uc131\ud558\uae30(3) - worknode \uc0dd\uc131 \ubc0f \ud655\uc778",description:"\uc21c\uc11c",date:"2022-11-16T00:00:00.000Z",formattedDate:"2022\ub144 11\uc6d4 16\uc77c",tags:[{label:"kubernetes",permalink:"/blog/tags/kubernetes"},{label:"aws",permalink:"/blog/tags/aws"},{label:"eks",permalink:"/blog/tags/eks"},{label:"vpc",permalink:"/blog/tags/vpc"},{label:"worknode",permalink:"/blog/tags/worknode"}],readingTime:1.79,truncated:!1,authors:[{name:"Andes Noh",title:"\uc5f0\uad6c\uc6d0",url:"https://github.com/andes-noh",imageURL:"https://github.com/andes-noh.png",key:"andes"}],prevItem:{title:"eks \uad6c\uc131\ud558\uae30(4) - eks \uc0ad\uc81c",permalink:"/blog/eks worknode"},nextItem:{title:"eks \uad6c\uc131\ud558\uae30(2) - eks cluster \uc0dd\uc131",permalink:"/blog/eks cluster"}},s={authorsImageUrls:[void 0]},p=[{value:"\uc21c\uc11c",id:"\uc21c\uc11c",children:[]},{value:"worknode \uc0dd\uc131 \ubc0f \ud655\uc778",id:"worknode-\uc0dd\uc131-\ubc0f-\ud655\uc778",children:[]}],k={toc:p};function u(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,n.Z)({},k,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\uc21c\uc11c"},"\uc21c\uc11c"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"vpc-\uad6c\uc1311"},"vpc \uad6c\uc131(1)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"eks-cluster-\uc0dd\uc1312"},"eks cluster \uc0dd\uc131(2)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"worknode-\uc0dd\uc131-\ubc0f-\ud655\uc7783---"},"worknode \uc0dd\uc131 \ubc0f \ud655\uc778(3) - \u2605")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"eks-\uc0ad\uc81c4"},"eks \uc0ad\uc81c(4)"))),(0,l.kt)("h2",{id:"worknode-\uc0dd\uc131-\ubc0f-\ud655\uc778"},"worknode \uc0dd\uc131 \ubc0f \ud655\uc778"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"\ub178\ub4dc-\uadf8\ub8f9\uc6a9-role-\uc0dd\uc131"},"\ub178\ub4dc \uadf8\ub8f9\uc6a9 role \uc0dd\uc131"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"iam -> \uc5ed\ud560 -> \uc5ed\ud560 \ub9cc\ub4e4\uae30"),(0,l.kt)("li",{parentName:"ul"},"\uc138\ud305\n",(0,l.kt)("img",{alt:"setting",src:a(7869).Z})),(0,l.kt)("li",{parentName:"ul"},"\uad8c\ud55c()\n",(0,l.kt)("img",{alt:"auth",src:a(6958).Z})),(0,l.kt)("li",{parentName:"ul"},"\uc5ed\ud560 \uc774\ub984 \ud655\uc815 \ubc0f \uc0dd\uc131")))),(0,l.kt)("h1",{id:""}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"\ub178\ub4dc-\uadf8\ub8f9-\ucd94\uac00"},"\ub178\ub4dc \uadf8\ub8f9 \ucd94\uac00"),(0,l.kt)("img",{alt:"node group",src:a(4969).Z}))),(0,l.kt)("h1",{id:"-1"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"\ub178\ub4dc-\uadf8\ub8f9-\uad6c\uc131"},"\ub178\ub4dc \uadf8\ub8f9 \uad6c\uc131"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc138\ud305\n",(0,l.kt)("img",{alt:"setting",src:a(9127).Z}),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc774\ub984 \ubc0f \ub178\ub4dc \uadf8\ub8f9\uc6a9 \uc5ed\ud560 \uc120\ud0dd"))),(0,l.kt)("li",{parentName:"ul"},"\ub2e4\uc74c")))),(0,l.kt)("h1",{id:"-2"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"\ucef4\ud4e8\ud130-\ubc0f-\uc870\uc815-\uad6c\uc131-\uc124\uc815"},"\ucef4\ud4e8\ud130 \ubc0f \uc870\uc815 \uad6c\uc131 \uc124\uc815"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc138\ud305\n",(0,l.kt)("img",{alt:"setting",src:a(3879).Z})),(0,l.kt)("li",{parentName:"ul"},"\ub098\uba38\uc9c0 \uadf8\ub300\ub85c, \ub178\ub4dc \uadf8\ub8f9 \uc870\uc815 \ud06c\ud0a4\uc758 \ucd5c\ub300 \ud06c\uae30 2 -> 3\uc73c\ub85c \ubcc0\uacbd"),(0,l.kt)("li",{parentName:"ul"},"\ub2e4\uc74c")))),(0,l.kt)("h1",{id:"-3"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"\ub124\ud2b8\uc6cc\ud0b9-\uc9c0\uc815"},"\ub124\ud2b8\uc6cc\ud0b9 \uc9c0\uc815"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc138\ud305\n",(0,l.kt)("img",{alt:"setting",src:a(792).Z})),(0,l.kt)("li",{parentName:"ul"},"\uc11c\ube0c\ub137 -> private \uc11c\ube0c\ub137 2\uac1c \uc120\ud0dd"),(0,l.kt)("li",{parentName:"ul"},"\ub178\ub4dc\uc5d0 \ub300\ud55c SSH \uc5d1\uc138\uc2a4 \uad6c\uc131 \ud65c\uc131\ud654"),(0,l.kt)("li",{parentName:"ul"},"SSH \ud0a4\ud398\uc5b4 -> vpc \uad6c\uc131\ud558\uba74\uc120 \ub9cc\ub4e0 Bastion \uc11c\ubc84 \ud0a4\uc120\ud0dd"),(0,l.kt)("li",{parentName:"ul"},"\ubcf4\uc548 \uadf8\ub8f9 -> Bastion-SG \uc120\ud0dd"),(0,l.kt)("li",{parentName:"ul"},"\uc704 \uacfc\uc815\uc744 \ud1b5\ud574 Bastion \uc11c\ubc84\uc5d0\uc11c worknode\ub85c ssh \uc811\uc18d \uac00\ub2a5")))),(0,l.kt)("h1",{id:"-4"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"\uc0dd\uc131-\uc644\ub8cc\uc218\ubd84-\uc18c\uc694"},"\uc0dd\uc131 \uc644\ub8cc(\uc218\ubd84 \uc18c\uc694)"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\uc0dd\uc131\uc644\ub8cc\n",(0,l.kt)("img",{alt:"complete",src:a(765).Z}))))),(0,l.kt)("h1",{id:"-5"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"bastion-\uc11c\ubc84-\uc811\uc18d-\ubc0f-user-\ub4f1\ub85d"},"Bastion \uc11c\ubc84 \uc811\uc18d \ubc0f user \ub4f1\ub85d"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"ssh -i 'Bastion.pem' ec2-user@ip\ub85c \uc811\uc18d"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"aws configure"),"\ub85c user \ub4f1\ub85d")))),(0,l.kt)("h1",{id:"-6"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"kubectl-\uc124\uce58-\ubc0f-\ud655\uc778"},"kubectl \uc124\uce58 \ubc0f \ud655\uc778"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"curl -o kubectl https://s3.us-west-2.amazonaws.com/amazon-eks/1.22.6/2022-03-09/bin/linux/amd64/kubectl\nchmod +x ./kubectl\nmkdir -p $HOME/bin && cp ./kubectl $HOME/bin/kubectl && export PATH=$PATH:$HOME/bin\necho 'export PATH=$PATH:$HOME/bin' >> ~/.bashrc\nkubectl version --short --client\n\n")),(0,l.kt)("h1",{id:"-7"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"eksctl-\uc124\uce58-\ubc0f-\ud655\uc778"},"eksctl \uc124\uce58 \ubc0f \ud655\uc778"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'curl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp\nsudo mv /tmp/eksctl /usr/local/bin\neksctl version\n')),(0,l.kt)("h1",{id:"-8"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"kubeconfig-update"},"kubeconfig update"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"aws eks update-kubeconfig --region '\uc9c0\uc5ed\uc774\ub984' --name 'eks \ud074\ub7ec\uc2a4\ud130 \uc774\ub984'\n")),(0,l.kt)("h1",{id:"-9"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("h3",{parentName:"li",id:"\ud074\ub7ec\uc2a4\ud130-\ubc0f-\ub178\ub4dc-\ud655\uc778"},"\ud074\ub7ec\uc2a4\ud130 \ubc0f \ub178\ub4dc \ud655\uc778"),(0,l.kt)("img",{alt:"check",src:a(5865).Z}))),(0,l.kt)("h1",{id:"-10"}))}u.isMDXComponent=!0},4969:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/1-e4425af2f6bfe567030e2eab2b3763c9.jpeg"},6958:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2-566f8893d655bd2aa454b082f6d4c6db.png"},7869:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/3-cdf383d31ce15e109dfb7c90133c34e5.png"},9127:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/4-9367fa79f5a6bde4d392c4d55ab516c7.png"},3879:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/5-64da482ef14f261a2c6aa619a82d3624.jpeg"},792:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/6-804299105a132fdef6d31eadc1970bce.jpeg"},765:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/7-4a29609d8cc7a75e9feff76f3e4f1825.png"},5865:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/8-a7310bcf57f89d150c190559ea8a7114.png"}}]);